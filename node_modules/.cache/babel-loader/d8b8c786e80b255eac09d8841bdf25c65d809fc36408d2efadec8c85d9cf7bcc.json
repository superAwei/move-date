{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user-profile\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"User Profile\", -1 /* HOISTED */)), $setup.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, \"Email: \" + _toDisplayString($setup.user.email), 1 /* TEXT */), _cache[1] || (_cache[1] = _createElementVNode(\"h3\", null, \"Movie Preferences\", -1 /* HOISTED */)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.user.moviePreferences, genre => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: genre\n    }, _toDisplayString($setup.getGenreName(genre)), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.signOut && $setup.signOut(...args))\n  }, \"Sign Out\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _cache[2] || (_cache[2] = [_createElementVNode(\"p\", null, \"Loading user data...\", -1 /* HOISTED */)])))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","$setup","user","_hoisted_2","_toDisplayString","email","_Fragment","_renderList","moviePreferences","genre","getGenreName","onClick","_cache","args","signOut","_hoisted_3"],"sources":["/Users/awei/Desktop/movie dating/src/views/UserProfile.vue"],"sourcesContent":["<template>\n  <div class=\"user-profile\">\n    <h2>User Profile</h2>\n    <div v-if=\"user\">\n      <p>Email: {{ user.email }}</p>\n      <h3>Movie Preferences</h3>\n      <ul>\n        <li v-for=\"genre in user.moviePreferences\" :key=\"genre\">{{ getGenreName(genre) }}</li>\n      </ul>\n      <button @click=\"signOut\">Sign Out</button>\n    </div>\n    <div v-else>\n      <p>Loading user data...</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { auth, db } from '@/firebase'\nimport { signOut } from 'firebase/auth'\nimport { doc, getDoc } from 'firebase/firestore'\n\nconst API_KEY = '392f3431bc009e57f5dc58f12e4949ee'\nconst API_URL = 'https://api.themoviedb.org/3'\n\nexport default {\n  name: 'UserProfile',\n  setup() {\n    const user = ref(null)\n    const router = useRouter()\n    const genres = ref([])\n\n    onMounted(async () => {\n      const currentUser = auth.currentUser\n      if (currentUser) {\n        const userDoc = await getDoc(doc(db, 'users', currentUser.uid))\n        user.value = userDoc.data()\n\n        // Fetch genres\n        const response = await fetch(`${API_URL}/genre/movie/list?api_key=${API_KEY}`)\n        const data = await response.json()\n        genres.value = data.genres\n      } else {\n        router.push('/signin')\n      }\n    })\n\n    const handleSignOut = async () => {\n      try {\n        await signOut(auth)\n        router.push('/signin')\n      } catch (error) {\n        console.error('Error signing out:', error)\n      }\n    }\n\n    const getGenreName = (genreId) => {\n      const genre = genres.value.find(g => g.id === genreId)\n      return genre ? genre.name : 'Unknown Genre'\n    }\n\n    return {\n      user,\n      signOut: handleSignOut,\n      getGenreName\n    }\n  }\n}\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAc;;EAD3BC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;uBACEC,mBAAA,CAaM,OAbNC,UAaM,G,0BAZJC,mBAAA,CAAqB,YAAjB,cAAY,sBACLC,MAAA,CAAAC,IAAI,I,cAAfJ,mBAAA,CAOM,OAVVK,UAAA,GAIMH,mBAAA,CAA8B,WAA3B,SAAO,GAAAI,gBAAA,CAAGH,MAAA,CAAAC,IAAI,CAACG,KAAK,kB,0BACvBL,mBAAA,CAA0B,YAAtB,mBAAiB,sBACrBA,mBAAA,CAEK,c,kBADHF,mBAAA,CAAsFQ,SAAA,QAP9FC,WAAA,CAO4BN,MAAA,CAAAC,IAAI,CAACM,gBAAgB,EAA9BC,KAAK;yBAAhBX,mBAAA,CAAsF;MAA1CD,GAAG,EAAEY;IAAK,GAAAL,gBAAA,CAAKH,MAAA,CAAAS,YAAY,CAACD,KAAK;oCAE/ET,mBAAA,CAA0C;IAAjCW,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEZ,MAAA,CAAAa,OAAA,IAAAb,MAAA,CAAAa,OAAA,IAAAD,IAAA,CAAO;KAAE,UAAQ,E,oBAEnCf,mBAAA,CAEM,OAbViB,UAAA,EAAAH,MAAA,QAAAA,MAAA,OAYMZ,mBAAA,CAA2B,WAAxB,sBAAoB,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}